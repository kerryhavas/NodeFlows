module.exports = function (app) {

    var nodeFlows = require('nodeFlows');
    var workflowManager = nodeFlows.workflowManager;

    // view the Statistics page
    app.get('/stats/view', function (req, res) {
        //
        nodeFlows.log("Req:" + req.url);
        var stats = nodeFlows.getStats();

        var queueHistoryCount = nodeFlows.getQueueItemHistoryCount(function(queueHistoryCount){
            nodeFlows.getWorkflowHistoryCount(function(workflowHistoryCount){
                res.render('../node_modules/nodeFlowsExpressClient/views/viewStats', { title: 'View Statistics', stats: stats, queueHistoryCount: queueHistoryCount, workflowHistoryCount: workflowHistoryCount })
            });
        });
        
    });

}