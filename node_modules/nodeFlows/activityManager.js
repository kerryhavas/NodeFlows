var Events = require('events');
var fs = require("fs");
var logging = require("./logManager.js");
var stats = require("./statManager.js");
var nodeFlows = require('./nodeFlows');

exports.getActivity = getActivityModule;

var activitiesStorage = {};

fs.readdir('./node_modules/nodeFlows/activities/', function (err, files) {
    if (err) throw err;
    files.forEach(function (file) {
        var activityName = file.replace(".js", "");
        var module = { name: activityName };
        module.module = require("./activities/" + file);
        activitiesStorage[activityName] = module;

        logging.log("Loaded Activity:" + activityName);
    });
});

function getActivityModule(name) {
    logging.log("Finding Activity:" + name);
    return activitiesStorage[name];
}