var Workflow = require('../workflow.js').Workflow;

exports.executeActivity = executeActivity;

//This allows you to increment values in working storage
//The value will be created if it doesnt exist and initialized to 0 (TODO: make more flexible)
function executeActivity(workflow, args, callback) {

    workflow.addHistory({task:"incrementWorkingStorage",notes: JSON.stringify(args)});
    workflow.incrementWorkingStorageValue(args.valueName, args.incrementAmount, function () {
        workflow.getWorkingStorageValue(args.valueName, function (workingStorageValue) {
            workflow.addHistory({task:"getWorkingStorageValue",notes:"Value:" + workingStorageValue.value});
            callback({ success: true });
        });
    });
}

