var Workflow = require('../workflow.js').Workflow;

exports.executeActivity = executeActivity;

//Gets a value from working storage and copies it into the workflow
//This allows it to be used in conditions
function executeActivity(workflow, args, callback) {

    workflow.addHistory({task:"getWorkingStorageValue",notes: JSON.stringify(args)});
    workflow.getWorkingStorageValue(args.valueName, function (workingStorageValue) {
        workflow.addHistory({ task: "getWorkingStorageValue", notes: "Value:" + workingStorageValue.value });
        workflow[args.workflowProperty] = workingStorageValue.value;
        callback({ success: true });
    });
}

