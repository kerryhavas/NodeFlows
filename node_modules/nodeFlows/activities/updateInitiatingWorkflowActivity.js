var nodeFlows = require('../nodeFlows');

exports.executeActivity = executeActivity;

function executeActivity(workflow, args, callback) {

    workflow.getInitiatingWorkflow(function(initiatingWorkflow){
        nodeFlows.log("Got initiatingWorkflow");
       initiatingWorkflow.updateWorkflow(args, function () {
            initiatingWorkflow.getQueueItem(function(queueItem){
                queueItem.addHistory({task: "UpdateFromChild", notes:"args:" + JSON.stringify(args)});
                queueItem.updateQueueItem({ status: "resume" },function(){
                    callback({ success: true });
                });
            });
        });
    });

    
}
