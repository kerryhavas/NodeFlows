//This activity will spin off a child workflow

var nodeFlows = require('../nodeFlows');

exports.executeActivity = executeActivity;

function executeActivity(workflow, args, callback) {

    args.initiatingWorkflow = workflow._id.toString();
    args.initiatingQueueItemId = workflow.queueItemId;
    args.initiatingQueueWorkerId = workflow.queueWorkerId;

    workflow.addHistory({ task: "QueueChildWorkflow", notes: JSON.stringify(args) });

    nodeFlows.queueManager.enqueueAsync(args);

    callback({success: true});
}
